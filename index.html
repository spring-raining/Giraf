<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="ブラウザ上で動画からgifアニメを作ります。">
    <meta name="keywords" content="gif,gifアニメ,動画,giraf,anime,animation">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Giraf</title>

    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/jquery.Jcrop.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="icon" type="image/vnd.microsoft.icon" href="favicon.ico">

</head>
<body>

<div class="navbar navbar-inverse navbar-static-top" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="" id="logo"></a>
        </div>
        <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-cog"></span></a>
                <ul class="dropdown-menu">
                    <li class="dropdown-header">Giraf v1.11</li>
                    <li><a href="" data-toggle="modal" data-target="#modal_updateinfo">アップデート情報</a></li>
                    <li><a href="" data-toggle="modal" data-target="#modal_acknowledgement">謝辞</a></li>
                    <li class="divider"></li>
                    <li><a href="http://github.com/spring-raining/Giraf" target="_blank">Github</a></li>
                    <li><a href="http://harusamex.com" target="_blank">harusamex.com</a></li>
                </ul>
            </li>
        </ul>
    </div>
</div>

<div class="jumbotron">
    <div id="video_wrapper">
        <video id="video" controls></video>

        <div id="drop_here">
            <h3>ここにドラッグ&ドロップ</h3><br>
            <input type="file" id="form_video" name="files">
        </div>
    </div>
</div>

<div id="thumbnail_wrapper" class="jumbotron jumbo-even text-center">
    <canvas class="thumbnail" id="thumbnail_1"></canvas>
    <canvas class="thumbnail" id="thumbnail_2"></canvas>
    <canvas class="thumbnail" id="thumbnail_3"></canvas>
    <canvas class="thumbnail" id="thumbnail_4"></canvas>
    <canvas class="thumbnail" id="thumbnail_5"></canvas>
    <br>
    <button type="button" id="start"class="btn btn-primary">
        <span class="glyphicon glyphicon-step-backward"></span> ここを始点にする
    </button>
    <button type="button" id="refresh" class="btn btn-success">
        <span class="glyphicon glyphicon-refresh"></span> 更新
    </button>
    <button type="button" id="stop" class="btn btn-danger">
        <span class="glyphicon glyphicon-step-forward"></span> ここを終点にする
    </button>
</div>

<div class="jumbotron">
    <div id="timeline_wrapper">
        <div class="panel panel-default timeline" id="timeline_skeleton">
            <div class="panel-heading">
                <button class="close">&times;</button>
            </div>
            <div class="panel-body">
                <canvas class="thumbnail timeline-start"></canvas>
                <canvas class="thumbnail timeline-stop"></canvas>
            </div>
        </div>

        <div id="timeline_holder"></div>

        <button type="button" id="add_timeline" class="btn btn-lg btn-default">
            <span class="glyphicon glyphicon-plus"></span>
        </button>
    </div>
    <br>

    <div class="text-center">
        <div class="btn-group dropup">
            <button type="button" id="config" class="btn btn-default dropdown-toggle disabled" data-toggle="dropdown">
                <span class="glyphicon glyphicon-cog"></span> 設定
            </button>
            <ul class="dropdown-menu">
                <li class="dropdown-header">gif設定</li>
                <li><a data-toggle="modal" data-target="#modal_capture_frame">動画のフレームレート</a></li>
                <li><a data-toggle="modal" data-target="#modal_gif_size">gifの大きさ</a></li>
                <li><a data-toggle="modal" data-target="#modal_gif_speed">gifのスピード</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">gif効果</li>
                <li><a data-toggle="modal" data-target="#modal_effect">効果を追加</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">gifクロップ</li>
                <li><a data-toggle="modal" data-target="#modal_crop">画像を切り抜き</a></li>
            </ul>
        </div>
        <button type="button" id="make" class="btn btn-primary disabled">
            <span class="glyphicon glyphicon-film"></span> 作成
        </button>
        <button type="button" id="capture" class="btn btn-info disabled">
            <span class="glyphicon glyphicon-camera"></span> キャプチャ
        </button>
    </div>
</div>

<div id="jumbo_result" class="jumbotron jumbo-even text-center">
    <div class="container">
        <div class="progress">
            <div id="progress_2" class="progress-bar"></div>
            <div id="progress_1" class="progress-bar progress-bar-info"></div>
        </div>

        <img id="result_image">
        <p id="result_status"></p>
    </div>
</div>

<!-- 動画のフレームレート -->
<div class="modal fade" id="modal_capture_frame" tabindex="-1" role="dialog" aria-labelledby="modal_capture_frame_label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="modal_capture_frame_label">動画のフレームレート</h4>
            </div>
            <div class="modal-body">
                <form>
                    <label for="form_capture_frame">動画から取得する画像のフレームレート</label>
                    <select name="capture_frame" id="form_capture_frame" class="form-control"></select>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="modal_capture_frame_save">保存</button>
            </div>
        </div>
    </div>
</div>

<!-- gifの大きさ -->
<div class="modal fade" id="modal_gif_size" tabindex="-1" role="dialog" aria-labelledby="modal_gif_size_label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="modal_gif_size_label">gifの大きさ</h4>
            </div>
            <div class="modal-body">
                <form>
                    <label for="form_gif_size">作成するgifの大きさ</label>
                    <select name="gif_s" id="form_gif_size" class="form-control"></select>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="modal_gif_size_save">保存</button>
            </div>
        </div>
    </div>
</div>

<!-- gifのスピード -->
<div class="modal fade" id="modal_gif_speed" tabindex="-1" role="dialog" aria-labelledby="modal_gif_speed_label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="modal_gif_speed_label">gifのスピード</h4>
            </div>
            <div class="modal-body">
                <form>
                    <label for="form_gif_speed">作成するGIFのスピード</label>
                    <select name="gif_speed" id="form_gif_speed" class="form-control"></select>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="modal_gif_speed_save">保存</button>
            </div>
        </div>
    </div>
</div>

<!-- 効果を追加 -->
<div class="modal fade" id="modal_effect" tabindex="-1" role="dialog" aria-labelledby="modal_effect_label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="modal_effect_label">効果を追加</h4>
            </div>
            <div class="modal-body">
                <form>
                    <label for="form_effect">javascriptを入力して効果を追加</label>
                    <div class="btn-group">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            <span class="glyphicon glyphicon-flash"></span> プリセット
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="modal-effect-preset" data-value="0">モノクロ</a></li>
                            <li><a class="modal-effect-preset" data-value="1">コントラスト</a></li>
                            <li><a class="modal-effect-preset" data-value="2">明るさ</a></li>
                            <li><a class="modal-effect-preset" data-value="3">ホワイトバランス</a></li>
                            <li><a class="modal-effect-preset" data-value="4">文字挿入</a></li>
                        </ul>
                    </div>
                    <span class="help-block">
                        context:出力画像に用いるcanvas要素のコンテキスト / resultWidth:出力画像の幅 / resultHeight:出力画像の高さ<br>
                        信頼出来るスクリプト以外は実行しないでください。
                    </span>
                    <textarea name="effect" id="form_effect" class="form-control" rows="14"></textarea>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="modal_effect_save">保存</button>
            </div>
        </div>
    </div>
</div>

<!-- 画像を切り抜き -->
<div class="modal fade" id="modal_crop" tabindex="-1" role="dialog" aria-labelledby="modal_crop_label" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="modal_crop_label">画像を切り抜き</h4>
            </div>
            <div class="modal-body">
                    <div class="checkbox">
                        <label for="form_crop">
                            <input id="form_crop" type="checkbox"> 画像を切り抜く
                        </label>
                        <div class="btn-group">
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                <span class="glyphicon glyphicon-lock"></span> 制約
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="modal-crop-aspect" data-value="0">制約なし</a></li>
                                <li><a class="modal-crop-aspect" data-value="1">1:1</a></li>
                                <li><a class="modal-crop-aspect" data-value="2">4:3</a></li>
                                <li><a class="modal-crop-aspect" data-value="3">8:5</a></li>
                                <li><a class="modal-crop-aspect" data-value="4">3:4</a></li>
                                <li><a class="modal-crop-aspect" data-value="5">5:8</a></li>
                            </ul>
                        </div>
                    </div>
                <img id="modal_crop_img">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="modal_crop_save">保存</button>
            </div>
        </div>
    </div>
</div>

<!-- 謝辞 -->
<div class="modal fade" id="modal_acknowledgement" tabindex="-1" role="dialog" aria-labelledby="modal_acknowledgement_label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="modal_acknowledgement_label">謝辞</h4>
            </div>
            <div class="modal-body">
                Girafは以下のライブラリによって成り立っています。
                <ul>
                    <li><a href="http://getbootstrap.com/">Bootstrap</a></li>
                    <li><a href="http://jnordberg.github.io/gif.js/">gif.js</a></li>
                    <li><a href="http://jquery.com/">jQuery</a></li>
                    <li><a href="http://jqueryui.com/">jQuery UI</a></li>
                    <li><a href="http://deepliquid.com/content/Jcrop.html">Jcrop</a></li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
            </div>
        </div>
    </div>
</div>

<!-- アップデート情報 -->
<div class="modal fade" id="modal_updateinfo" tabindex="-1" role="dialog" aria-labelledby="modal_updateinfo_label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="modal_updateinfo_label">アップデート情報</h4>
            </div>
            <div class="modal-body">
                <p>
                    v1.11 (2014/6/19)
                    <ul><li>gif作成時にエラーを起こして停止する問題を修正</li></ul>
                </p>
                <p>
                    v1.1 (2014/3/5)
                    <ul><li>キャプチャ機能追加</li></ul>
                </p>
                <p>
                    v1.0 (2014/2/26)
                    <ul><li>公開</li></ul>
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
            </div>
        </div>
    </div>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.Jcrop.js"></script>
<script src="js/gif.js"></script>
<script src="js/main.js"></script>

</body>
</html>